
<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>TOLCLINET | Login</title>
	<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
	<link rel="icon" href="assets/img/tolclinet/favicon.ico" type="image/x-icon"/>

	<!-- Fonts and icons -->
	<script src="assets/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: {"families":["Public Sans:300,400,500,600,700"]},
			custom: {"families":["Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['assets/css/fonts.min.css']},
			active: function() {
				sessionStorage.fonts = true;
			}
		});
	</script>
	
	<!-- CSS Files -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/plugins.min.css">
	<link rel="stylesheet" href="assets/css/tolclinet.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/themes/bootstrap.min.css"/>
    <link rel="stylesheet" href="assets/css/custom.css">
</head>
<body class="login">
	<div class="wrapper wrapper-login wrapper-login-full p-0">
		<div class="login-aside w-50 d-flex flex-column align-items-center justify-content-center text-center bg-secondary-gradient">
			<h1 class="title fw-bold text-white mb-3">TOLCLINET </h1>
            <h3 id="viewing"></h3>
			<p class="subtitle text-white op-7"><span id="verse-content" class="verse-container"></span><span id="verse"></span></p>
		</div>
		<div class="login-aside w-50 d-flex align-items-center justify-content-center bg-white">
			<div class="container container-login container-transparent animated fadeIn">
                <div class="alert alert-dismissible fade show" id="login-success" style="border-radius: 10px; margin-left:10px;margin-right:10px;margin-top:5%"></div>
                <div class="alert alert-dismissible fade show" id="login-info" style="border-radius: 10px; margin-left:10px;margin-right:10px;margin-top:5%"></div>
                <div class="alert alert-dismissible fade show" id="login-error" style="border-radius: 10px; margin-left:10px;margin-right:10px;margin-top:5%"></div>
				<h3 class="text-center">Sign In To TOLCLINET</h3>
				<div class="login-form">
					<div class="form-group">
						<label for="username"><b>Username</b></label>
						<input id="username" name="username" type="text" class="form-control" placeholder="username" required>
					</div>
					<div class="form-group">
						<label for="password"><b>Password</b></label>
						<a href="#" class="link float-end">Forget Password ?</a>
						<div class="position-relative">
							<input id="password" name="password" type="password" class="form-control" placeholder="username" required>
							<div class="show-password">
								<i class="icon-eye"></i>
							</div>
						</div>
					</div>
					<div class="form-group form-action-d-flex mb-3">
						<div class="form-check">
							<input type="checkbox" class="form-check-input" id="rememberme">
							<label class="custom-control-label m-0" for="rememberme">Remember Me</label>
						</div>
						<a href="#" class="btn btn-secondary col-md-5 float-end mt-3 mt-sm-0 fw-bold" id="sign-in">Sign In</a>
					</div>
					<div class="login-account">
						<span class="msg">Don't have an account yet ?</span>
						<a href="#" id="show-signup" class="link">Request Access</a>
					</div>
				</div>
			</div>

			<div class="container container-signup container-transparent animated fadeIn">
				<h3 class="text-center">Request Access</h3>
				<div class="login-form">
					<div class="form-group">
						<label for="fullname"><b>Fullname</b></label>
						<input  id="fullname" name="fullname" type="text" class="form-control" placeholder="John Doe" required>
					</div>
					<div class="form-group">
						<label for="email"><b>Email</b></label>
						<input  id="email" name="email" type="email" class="form-control" placeholder="example@email.com" required>
					</div>
					<div class="form-group">
						<label for="passwordsignin"><b>Password</b></label>
						<div class="position-relative">
							<input  id="passwordsignin" name="passwordsignin" type="password" class="form-control" placeholder="password" required>
							<div class="show-password">
								<i class="icon-eye"></i>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="confirmpassword"><b>Confirm Password</b></label>
						<div class="position-relative">
							<input  id="confirmpassword" name="confirmpassword" type="password" class="form-control" placeholder="confirm password" required>
							<div class="show-password">
								<i class="icon-eye"></i>
							</div>
						</div>
					</div>
					<div class="row form-sub m-0">
						<div class="form-check">
							<input type="checkbox" class="form-check-input" name="agree" id="agree">
							<label class="form-check-label" for="agree">I Agree the terms and conditions.</label>
						</div>
					</div>
					<div class="row form-action">
						<div class="col-md-6">
							<a href="#" id="show-signin" class="btn btn-danger btn-link w-100 fw-bold">Cancel</a>
						</div>
						<div class="col-md-6">
							<a href="#" class="btn btn-secondary w-100 fw-bold" id="sign-up">Request Access</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="assets/js/core/jquery-3.7.1.min.js"></script>	
	<script src="assets/js/core/popper.min.js"></script>
	<script src="assets/js/core/bootstrap.min.js"></script>
	<script src="assets/js/tolclinet.min.js"></script>
    <script src="http://cdn.scripture.api.bible/fums/fumsv2.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/alertify.min.js"></script>
    <script>
        const API_KEY = `c53fb84e16e063fa0af7c21df51d3d42`;
        const verse = document.querySelector(`#verse-content`);
        const verseRef = document.querySelector(`#verse`);
        const BIBLE_ID = `685d1470fe4d5c3b-01`;
        const VERSES = [`JER.29.11`,`PSA.23`,`1COR.4.4-8`,`PHP.4.13`,`JHN.3.16`,`ROM.8.28`,`ISA.41.10`,`PSA.46.1`,`GAL.5.22-23`,`HEB.11.1`,`2TI.1.7`,`1COR.10.13`,`PRO.22.6`,`ISA.40.31`,`JOS.1.9`,`HEB.12.2`,`MAT.11.28`,`ROM.10.9-10`,`PHP.2.3-4`,`MAT.5.43-44`,`JER.29.11`,`PSA.23`,`1COR.4.4-8`,`PHP.4.13`,`JHN.3.16`,`ROM.8.28`,`ISA.41.10`,`PSA.46.1`,`GAL.5.22-23`,`HEB.11.1`,`2TI.1.7`,`1COR.10.13`,`PRO.22.6`,`ISA.40.31`,`JOS.1.9`,`HEB.12.2`,`MAT.11.28`,`ROM.10.9-10`,`PHP.2.3-4`,`MAT.5.43-44`,];
        const verseIndex = new Date().getDate();
        const verseID = VERSES[verseIndex];
        getResults(verseID).then((data) => {
            const passage = data.passages[0];
            verseRef.innerHTML = `<span><i>${passage.reference}</i></span>`;
            verse.innerHTML = `<div class="text eb-container">${passage.content}</div>`;
        });
        function getResults(verseID) {
            return new Promise((resolve, reject) => {
                const xhr = new XMLHttpRequest();
                xhr.withCredentials = false;
                xhr.addEventListener(`readystatechange`, function () {
                    if (this.readyState === this.DONE) {
                        const { data, meta } = JSON.parse(this.responseText);
                        _BAPI.t(meta.fumsId);
                        resolve(data);
                    }
                });

                xhr.open(
                `GET`,
                `https://api.scripture.api.bible/v1/bibles/${BIBLE_ID}/search?query=${verseID}`
                );
                xhr.setRequestHeader(`api-key`, API_KEY);
                xhr.onerror = () => reject(xhr.statusText);
                xhr.send();
            });
        }



        $(document).ready(function() {
            $("#login-success").addClass("alert-success")
            $("#login-info").addClass("alert-info")
            $("#login-error").addClass("alert-danger")
            $("#login-success").hide()
            $("#login-info").hide()
            $("#login-error").hide()
            // localStorage.setItem("api_url", "http://192.168.55.100:8000/api/")
            localStorage.setItem("api_url", "http://167.99.46.0/tolclinet/api/")
            $("#sign-in").click(function(){
                var username = $("input[name='username']").val();
                var password = $("input[name='password']").val();
                if(username == ""){
                $("#invalidusername").show();
                $("#yourUsername").addClass("is-invalid");
                }
                if(password == ""){
                $("#invalidpassword").show();
                $("#yourPassword").addClass("is-invalid");
                }
                if(username=="" || password==""){
                return false;
                }
                $("#loginbtnspinner").addClass("spinner-grow")
                $.ajax({
                    url: localStorage.getItem("api_url")+"login",
                    method:"POST",
                    type: "POST",
                    dataType: "json",
                    data: {
                        username: username,
                        password: password
                    },
                    success: function(data){
                        if(data.success==true){
                            $("#login-success").hide()
                            $("#login-info").hide()
                            $("#login-error").hide()
                            $("#login-success").html('<p><i class="fa fa-check-circle"></i> Logged in Successfully. Please wait...</p>')
                            $("#login-success").show(200)
                            alertify.success('Logged in Successfully, Please wait.');
                            console.log(data.user[0].id)                            
                            localStorage.setItem("user_id", data.user[0].id);
                            localStorage.setItem("full_names", data.user[0].name);
                            localStorage.setItem("user_type", data.user[0].business_type);
                            localStorage.setItem("token", data.token);
                            window.location.href = "index.html";
                        }else if(data.success==false){
                            $("#login-success").hide()
                            $("#login-info").hide()
                            $("#login-error").hide()
                            $("#login-info").html('<p><i class="fa fa-check-circle"></i> ' + data.message + '</p>')
                            $("#login-info").show(200)
                        }
                    },
                    statusCode: {
                        401: function(data) {
                            console.log(data)
                            console.log(data.responseJSON)
                            console.log(data.responseJSON.message)
                            $("#login-success").hide()
                            $("#login-info").hide()
                            $("#login-error").hide()
                            $("#loginbtnspinner").removeClass("spinner-grow")
                            $("#login-error").html('<p><i class="fa fa-exclamation-triangle"></i> ' + data.responseJSON.message + '</p>')
                            $("#login-error").show(200)                            
                        }
                    }
                });
            })
        });
    </script>
</body>
</html>